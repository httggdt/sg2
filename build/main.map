{"version":3,"sources":["webpack:///webpack/bootstrap 1696b0fab4a0a9d78bd1","webpack:///external \"express\"","webpack:///external \"async\"","webpack:///./server/conf/index.js","webpack:///external \"request\"","webpack:///./server/index.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///external \"regenerator-runtime\"","webpack:///./server/api/index.js","webpack:///./server/api/users.js","webpack:///./server/api/log.js","webpack:///./server/helper/os.js","webpack:///external \"os\"","webpack:///external \"fluent-logger\"","webpack:///./server/conf/dev.conf.js","webpack:///external \"path\"","webpack:///./server/helper/http.js","webpack:///./server/helper/data.js","webpack:///external \"ejs\"","webpack:///./server/helper/cache.js","webpack:///external \"redis\"","webpack:///external \"body-parser\"","webpack:///./server/api/util.js"],"names":["yz_conf","process","require","default","async","app","express","host","env","HOST","conf","ip","port","PORT","path","version","ejs","engine","renderFile","open","close","set","use","api","bodyParser","xhr","util","cacehData","formateDate","static","SITE_PATH","TIPS_ID","VERSION","get","req","res","next","redirect","httpHelper","allData","hotNews","IosTips","waitTips","render","allList","totalList","data","news","total","active","media","notice","baseData","allNews","id","params","tags","name","detailData","renderSitemapHd","page","query","undefined","series","articleList","callback","error","result","header","nowDate","Date","err","status","send","setTimeout","listen","console","log","router","Router","users","json","parseInt","length","sendStatus","logger","createFluentSender","timeout","reconnectInterval","on","message","level","app_id","headers","clinet_ip","getClientIp","formatMessage","emit","code","server_ip","serviceIp","os","network","networkInterfaces","key","i","family","address","ipAddress","forwardedIpsStr","forwardedIps","split","connection","remoteAddress","module","exports","cache","password","url","Promise","resolve","reject","request","method","body","response","statusCode","verification","isString","JSON","parse","post","isJson","obj","isjson","Object","prototype","toString","call","toLowerCase","isObject","isArray","arr","redis","client","createClient","getKey","reply","val","time","baseUrl","options","qs","apicallback","stringify","tokenget","token","tokenpost","openapp","errorFun","nosql","noapi","format","custom","stack","toLocaleString","Error","date","defaultDate","year","getFullYear","month","getMonth","day","getDate"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1696b0fab4a0a9d78bd1","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"async\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"async\"\n// module id = 1\n// module chunks = 0","\r\n\r\n\r\nvar yz_conf = {};\r\n//引入环境配置\r\n\tif(process.env.NODE_ENV == 'production'){\r\n\tyz_conf = require('./pro.conf').default\r\n}else{\r\n\tyz_conf = require('./dev.conf').default\r\n}\r\n\r\n\r\n\r\n\r\nexport default yz_conf\n\n\n// WEBPACK FOOTER //\n// ./server/conf/index.js","module.exports = require(\"request\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request\"\n// module id = 3\n// module chunks = 0","import express from 'express'\r\n//引入路由\r\nimport api from './api'\r\n\r\nvar async = require('async');\r\n\r\nimport conf from './conf'\r\nconst app = express()\r\nconst host = process.env.HOST || conf.ip\r\n//设置端口号\r\nconst port = process.env.PORT || conf.port\r\nvar path = require(\"path\")\r\nimport httpHelper from './helper/http';\r\n//版本号\r\nvar version = 1;\r\n//配置模板渲染引擎\r\nvar ejs = require('ejs')\r\napp.engine('html', ejs.renderFile);\r\n\r\nejs.open = '{{';\r\nejs.close = '}}';\r\n//设置模板后缀\r\napp.set(\"view engine\", \"html\");\r\napp.set(\"view cache\", false);\r\napp.set('views', conf.path + 'views');\r\n\r\napp.set('port', port)\r\n\r\napp.use('/api', api)\r\n\r\nimport cache from './helper/cache';\r\nvar bodyParser = require('body-parser');\r\nimport util from './api/util.js';\r\nconst xhr = util.xhr;\r\nvar cacehData = false;\r\nconst formateDate = util.formateDate;\r\n\r\n//托管静态资源\r\napp.use(express.static('static'));\r\n\r\nconst SITE_PATH = '//sg2.youzu.com'; // 网站Url\r\nvar path='//pic.youzu.com/sg2/download';   //资源路径\r\nconst TIPS_ID = '5151118'; // ios提示文章id\r\nvar VERSION = '201904152021'  // 版本号\r\n\r\n\r\n// ----------下载页-pc ------------\r\napp.get(\"/\",function(req, res, next){\r\n  res.redirect('/download.html');\r\n})\r\n\r\napp.get(\"/download(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var allData = await httpHelper.get('https://uapi.youzu.com/api/164/data/ad-list?position=ewm|iosDown_pc|slogan|swipe')  // 所有广告位\r\n    var hotNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/recommend-article?position=hot-4')   // 热点文章\r\n    var IosTips = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-detail?id='+TIPS_ID)   // ios安装-文章\r\n    var waitTips = await httpHelper.get('https://uapi.youzu.com/api/164/data/ad-list?position=wait_tips')   // 等待 弹窗\r\n\r\n    res.render(\"download/pc/index.html\",{\r\n      allData: allData,\r\n      hotNews: hotNews,\r\n      IosTips: IosTips,\r\n      waitTips: waitTips,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n\r\n//全部新闻\r\napp.get(\"/allnews(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var allList = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')  // 所有新闻\r\n    var totalList = allList.data.news.total + allList.data.active.total + allList.data.media.total + allList.data.notice.total   // 所有新闻数\r\n\r\n    res.render(\"download/pc/allNews.html\",{\r\n      allList: allList,\r\n      totalList: totalList,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n// 新闻-公告页\r\napp.get(\"/notice(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var baseData = await httpHelper.get('https://uapi.youzu.com/api/164/data/base')   // 站点信息-seo\r\n    var allList = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=notice')\r\n    var allNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n\r\n    res.render(\"download/pc/notice.html\",{\r\n      baseData: baseData,\r\n      allList: allList,\r\n      allNews: allNews,\r\n      totalList: allList.data.notice.total,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n// 新闻-新闻页\r\napp.get(\"/news(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var baseData = await httpHelper.get('https://uapi.youzu.com/api/164/data/base')   // 站点信息-seo\r\n    var allList = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news')\r\n    var allNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n    \r\n    res.render(\"download/pc/news.html\",{\r\n      baseData: baseData,\r\n      allList: allList,\r\n      allNews: allNews,\r\n      totalList: allList.data.news.total,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n// 新闻-媒体页\r\napp.get(\"/media(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var baseData = await httpHelper.get('https://uapi.youzu.com/api/164/data/base')   // 站点信息-seo\r\n    var allList = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=media')\r\n    var allNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n\r\n    res.render(\"download/pc/media.html\",{\r\n      baseData: baseData,\r\n      allList: allList,\r\n      allNews: allNews,\r\n      totalList: allList.data.media.total,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n// 新闻-活动页\r\napp.get(\"/active(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var baseData = await httpHelper.get('https://uapi.youzu.com/api/164/data/base')   // 站点信息-seo\r\n    var allList = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=active')\r\n    var allNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n\r\n    res.render(\"download/pc/active.html\",{\r\n      baseData: baseData,\r\n      allList: allList,\r\n      allNews: allNews,\r\n      totalList: allList.data.active.total,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n\r\n\r\n// ----------下载页--mob ------------\r\n// 首页\r\napp.get(\"/m\",function(req, res, next){\r\n  res.redirect('/m/download.html');\r\n})\r\napp.get(\"/m/download(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var allData = await httpHelper.get('https://uapi.youzu.com/api/164/data/ad-list?position=ewm|qq|slogan|yd_swiper|downloadIos|wx')\r\n    var hotNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/recommend-article?position=hot-4')\r\n    var IosTips = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-detail?id='+TIPS_ID)   // ios安装-文章\r\n    var waitTips = await httpHelper.get('https://uapi.youzu.com/api/164/data/ad-list?position=wait_tips')   // 等待 弹窗\r\n\r\n    // console.log(allData.data.downloadIos[0].url)\r\n    res.render(\"download/mob/index.html\",{\r\n      allData: allData,\r\n      hotNews: hotNews,\r\n      IosTips: IosTips,\r\n      waitTips: waitTips,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n\r\n// 新闻--全部新闻\r\napp.get(\"/m/allnews(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var allData = await httpHelper.get('https://uapi.youzu.com/api/164/data/ad-list?position=wx')\r\n    var allList = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n    var totalList = allList.data.news.total + allList.data.active.total + allList.data.media.total + allList.data.notice.total\r\n\r\n    res.render(\"download/mob/allNews.html\",{\r\n      allData: allData,\r\n      allList: allList,\r\n      totalList: totalList,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n\r\n// 新闻--新闻页\r\napp.get(\"/m/news(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var allData = await httpHelper.get('https://uapi.youzu.com/api/164/data/ad-list?position=wx')\r\n    var baseData = await httpHelper.get('https://uapi.youzu.com/api/164/data/base')   // 站点信息-seo\r\n    var allList = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news')\r\n    var allNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n\r\n    res.render(\"download/mob/news.html\",{\r\n      allData: allData,\r\n      allList: allList,\r\n      allNews: allNews,\r\n      baseData: baseData,\r\n      totalList: allList.data.news.total,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n// 新闻--公告\r\napp.get(\"/m/notice(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var allData = await httpHelper.get('https://uapi.youzu.com/api/164/data/ad-list?position=wx')\r\n    var baseData = await httpHelper.get('https://uapi.youzu.com/api/164/data/base')   // 站点信息-seo\r\n    var allList = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=notice')\r\n    var allNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n\r\n    res.render(\"download/mob/notice.html\",{\r\n      allData: allData,\r\n      allList: allList,\r\n      allNews: allNews,\r\n      baseData: baseData,\r\n      totalList: allList.data.notice.total,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n// 新闻--媒体\r\napp.get(\"/m/media(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var allData = await httpHelper.get('https://uapi.youzu.com/api/164/data/ad-list?position=wx')\r\n    var baseData = await httpHelper.get('https://uapi.youzu.com/api/164/data/base')   // 站点信息-seo\r\n    var allList = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=media')\r\n    var allNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n\r\n    res.render(\"download/mob/news.html\",{\r\n      allData: allData,\r\n      allList: allList,\r\n      allNews: allNews,\r\n      baseData: baseData,\r\n      totalList: allList.data.media.total,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n// 新闻--活动\r\napp.get(\"/m/active(\\.html)?\",function(req, res, next){\r\n  (async function() {\r\n    var allData = await httpHelper.get('https://uapi.youzu.com/api/164/data/ad-list?position=wx')\r\n    var baseData = await httpHelper.get('https://uapi.youzu.com/api/164/data/base')   // 站点信息-seo\r\n    var allList = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=active')\r\n    var allNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n\r\n    res.render(\"download/mob/active.html\",{\r\n      allData: allData,\r\n      allList: allList,\r\n      allNews: allNews,\r\n      baseData: baseData,\r\n      totalList: allList.data.active.total,\r\n      path: path,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n\r\n//新闻详情页 --mob--\r\napp.get('/m/:name/:id?(\\.html)', function (req, res, next) {\r\n  // app.get('/m/newsdetail(\\.html)?', function (req, res, next) {\r\n    (async function() {\r\n      var id = req.params.id;\r\n      var tags = req.params.name;\r\n      // var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/newNews');\r\n      var detailData = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-detail?id='+ id);\r\n      var allData = await httpHelper.get('https://uapi.youzu.com/api/164/data/ad-list?position=wx')\r\n      var allNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n  \r\n      res.render(\"download/mob/newsdetail.html\", {\r\n        id: id,\r\n        tags: tags,\r\n        detailData: detailData,\r\n        allNews: allNews,\r\n        tags: tags,\r\n        allData: allData,\r\n        SITE_PATH: SITE_PATH,\r\n        path: path,\r\n        VERSION: VERSION,\r\n      });\r\n    })()\r\n  })\r\n  \r\n\r\napp.get('/sitemap.xml', renderSitemapHd); // 搜索爬虫\r\napp.get('/sitemap.html', renderSitemapHd); // 搜索爬虫\r\napp.get('/sitemap.txt', renderSitemapHd); // 搜索爬虫\r\n\r\n\r\n//搜索爬虫\r\nfunction renderSitemapHd(req, res, next) {\r\n  var page = req.query.page == undefined ? 1 : req.query.page;\r\n  async.series({\r\n      articleList: function(callback) {\r\n          xhr.get('download/pc/allNews.html', {}, function(res) {\r\n              callback(null, res.data);\r\n          });\r\n      }\r\n  }, function(error, result) {\r\n      res.header('Content-Type', 'application/xml');\r\n      res.header('Cache-Control', 'no-cache');\r\n      res.header('Pragma', 'no-cache');\r\n      res.header('Expires', '-1');\r\n      res.render('download/pc/sitemap.html', {\r\n          env: process.env.NODE_ENV,\r\n          articleList: result.articleList == null ? [] : result.articleList,\r\n          nowDate:formateDate(new Date())\r\n      });\r\n\r\n  });\r\n}\r\n\r\n//新闻详情页 --pc--\r\napp.get('/:name/:id?(\\.html)', function (req, res, next) {\r\n  (async function() {\r\n    var id = req.params.id;\r\n    var tags = req.params.name;\r\n    // var newsData = await httpHelper.get('//webapi.youzu.com/shengbei/newNews');\r\n    var detailData = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-detail?id='+ id);\r\n    var allNews = await httpHelper.get('https://uapi.youzu.com/api/164/data/article-list?cid=news|active|media|notice')\r\n\r\n    \r\n    res.render(\"download/pc/newsdetail.html\", {\r\n      id: id,\r\n      tags: tags,\r\n      detailData: detailData,\r\n      allNews: allNews,\r\n      tags: tags,\r\n      path: path ,\r\n      SITE_PATH: SITE_PATH,\r\n      VERSION: VERSION,\r\n    });\r\n  })()\r\n})\r\n\r\n\r\n//定义错误处理方法\r\napp.use(function(err, req, res, next) {\r\n    // console.log(err + '测试')\r\n\t  // console.error(err.stack);\r\n\t  res.status(500).send('Something broke!');\r\n});\r\n\r\napp.use(function(err, req, res, next) {\r\n  // console.log(\"报错日志\",err.stack);\r\n  res.status(404).send('Something broke!');\r\n});\r\n;\r\n\r\napp.use(function(req, res, next) {\r\n  // 设置所有HTTP请求的超时时间\r\n  req.setTimeout(10000);\r\n  // 设置所有HTTP请求的服务器响应超时时间\r\n  res.setTimeout(10000);\r\n  next();\r\n});\r\n\r\n\r\n// Listen the server\r\napp.listen(port, host)\r\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 5\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 6\n// module chunks = 0","import { Router } from 'express'\r\n\r\nimport users from './users'\r\nimport log from './log'\r\n\r\nconst router = Router()\r\n\r\n\r\n// Add USERS Routes\r\nrouter.use(users)\r\nrouter.use(log)\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/index.js","import { Router } from 'express'\r\n\r\nconst router = Router()\r\n\r\n// Mock Users\r\nconst users = [\r\n  { name: 'Alexandre' },\r\n  { name: 'Pooya' },\r\n  { name: 'Sébastien' },\r\n]\r\n\r\n/* GET users listing. */\r\nrouter.get('/users', function (req, res, next) {\r\n  res.json(users)\r\n})\r\n\r\n/* GET user by ID. */\r\nrouter.get('/users/:id', function (req, res, next) {\r\n  const id = parseInt(req.params.id)\r\n  if (id >= 0 && id < users.length) {\r\n    res.json(users[id])\r\n  } else {\r\n    res.sendStatus(404)\r\n  }\r\n})\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/users.js","\r\n\r\nimport { Router } from 'express'\r\nvar ip = require('../helper/os')\r\n\r\n\r\nvar logger = require('fluent-logger').createFluentSender('log.hd-.application', {\r\n   host: '10.7.32.240',\r\n   port: 24224,\r\n   timeout: 3.0,\r\n   reconnectInterval: 600000 // 10 minutes\r\n});\r\nlogger.on('error', (error) => {\r\n  console.log('fluent-logger error',error);\r\n});\r\nlogger.on('connect', () => {\r\n  console.log('fluent-logger','connected!');\r\n});\r\n\r\nconst router = Router()\r\n\r\nvar json =  {\r\n//\t    \"message\": \"这是日志消息\", //日志消息\r\n////\t    \"category\": \"yii\\\\db\\\\Command::query\",   //日志分类\r\n//\t    \"level\": \"info\",\t//日志等级\r\n////\t    \"timeline\": \"\", //客户端时间\r\n//\t    \"server_ip\": \"10.6.55.3\",   //服务器ip\r\n//\t    \"clinet_ip\": \"58.246.221.75\", //客户端ip\r\n\t  }\r\n/* GET users listing. */\r\nrouter.get('/log', function (req, res, next) {\r\n\tconsole.log('/log')\r\n\tvar message = {}\r\n\tmessage.level = req.query.level\r\n\tmessage.host = req.host\r\n\tmessage.app_id = req.query.app_id\r\n\tmessage.message = req.query.message + \"-----\" + req.headers['user-agent']\r\n//\tmessage.message = '这是日志消息'\r\n\t//message.category = \"log.hd.web\"\r\n\t//message.timeline = req.query.timeline\r\n\tmessage.clinet_ip = ip.getClientIp(req)\r\n\tvar message = formatMessage(message)\r\n\t\r\n  logger.emit('web',message);\r\n  res.json({code:100})\r\n})\r\n\r\n//格式化消息\r\nfunction formatMessage(message){\r\n\tjson.server_ip = ip.serviceIp()\r\n\tjson.level = message.level\r\n\tjson.app_id = message.app_id\r\n\tjson.host = message.host\r\n//\tjson.category = message.category\r\n//\tjson.timeline = message.timeline\r\n\tjson.message = message.message\r\n\tjson.clinet_ip = message.clinet_ip\r\n\tconsole.log(json)\r\n\treturn json;\r\n}\r\n\r\n\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/log.js","var os = require('os');\r\n\r\nvar ip = {\r\n\t\tserviceIp:function(){\r\n\t\t\tvar network = os.networkInterfaces();\r\n\t\t\tfor (var key in network){\r\n\t\t\t\tif(key == \"eth0\" || key == \"本地连接\" ){\r\n\t\t\t\t\tfor(var i = 0; i < network[key].length; i++){\r\n\t\t\t\t\t\tif(network[key][i].family === 'IPv4'){\r\n\t\t\t\t\t\t\treturn network[key][i].address;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetClientIp:function (req) {  \r\n\t\t    var ipAddress;  \r\n\t\t    var forwardedIpsStr = req.header('x-forwarded-for');   \r\n\t\t    if (forwardedIpsStr) {  \r\n\t\t        var forwardedIps = forwardedIpsStr.split(',');  \r\n\t\t        ipAddress = forwardedIps[0];  \r\n\t\t    }  \r\n\t\t    if (!ipAddress) {  \r\n\t\t        ipAddress = req.connection.remoteAddress;  \r\n\t\t    }  \r\n\t\t    return ipAddress;  \r\n\t\t}  \r\n}\r\n\r\n\r\nmodule.exports = ip\n\n\n// WEBPACK FOOTER //\n// ./server/helper/os.js","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"fluent-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fluent-logger\"\n// module id = 12\n// module chunks = 0","var conf = {\r\n  ip:'0.0.0.0',\r\n  port:8080,\r\n  // Redis ip\r\n  cache:{\r\n    ip:'10.18.97.121',\r\n    port:6379,\r\n    password:'LburBG0D90LBHot0'\r\n  },\r\n  path:\"\",\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default conf\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/conf/dev.conf.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 14\n// module chunks = 0","import verification from './data'\r\nimport request from 'request'\r\n\r\n\r\n\r\nlet httpHelper = {\r\n\t\tget:(url,data)=>{\r\n\t\t    return new Promise ((resolve, reject) => {\r\n\t\t        request.get({\r\n\t\t            url: url,\r\n\t\t            method: \"get\",\r\n\t\t            json: true,\r\n\t\t            headers: {\r\n\t\t                \"content-type\": \"application/json\",\r\n\t\t            },\r\n\t\t            body: data\r\n\t\t        },function(err,response,body){\r\n\t\t            console.log('返回结果：',data,body);\r\n\t\t            if(!err && response.statusCode == 200){\r\n\t\t                if(body!=='null'){\r\n\t\t                \t//解析json    JSON.stringify(data)  转换成json\r\n\t\t                \tif(verification.isString(body)){\r\n\t\t                \t\tbody = JSON.parse(data);\r\n\t\t                \t}\r\n\t\t                    resolve(body);\r\n\t\t                }\r\n\t\t            }\r\n\t\t            resolve(false);\r\n\t\t        });    \r\n\t\t    });\r\n\t\t},\r\n\t\tpost:(url,data) =>{\r\n\t\t    return new Promise ((resolve, reject) => {\r\n\t\t        request.post({\r\n\t\t            url: url,\r\n\t\t            method: \"post\",\r\n\t\t            json: true,\r\n\t\t            headers: {\r\n\t\t                \"content-type\": \"application/json\",\r\n\t\t            },\r\n\t\t            body: data\r\n\t\t        },function(err,response,body){\r\n\t\t            console.log('返回结果：',data,body);\r\n\t\t            if(!err && response.statusCode == 200){\r\n\t\t                if(body!=='null'){\r\n\t\t                \t//解析json    JSON.stringify(data)  转换成json\r\n\t\t                \tif(verification.isString(body)){\r\n\t\t                \t\tbody = JSON.parse(data);\r\n\t\t                \t}\r\n\t\t                    resolve(body);\r\n\t\t                }\r\n\t\t            }\r\n\t\t            resolve(false);\r\n\t\t        });    \r\n\t\t    });\r\n\t\t\r\n\t\t},\r\n}\r\n\r\nexport default httpHelper\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/helper/http.js","\r\n\r\n\r\n//判断是否是json\r\nexports.isJson = function(obj){\r\n\tvar isjson = typeof(obj) == \"object\" && Object.prototype.toString.call(obj).toLowerCase() == \"[object object]\" && !obj.length; \r\n\treturn isjson;\r\n}\r\n\r\n//判断是否是对象\r\nexports.isObject = function (obj){\r\n    return Object.prototype.toString.call(obj) === '[object Object]';\r\n}\r\n \r\n//判断是否是数组\r\nexports.isArray = function (arr) { \r\n\treturn Object.prototype.toString.call(arr) === '[object Array]';\r\n}\r\n\r\n\r\n//判断是否是字符串\r\nexports.isString = function (arr) { \r\n\treturn Object.prototype.toString.call(arr) === '[object Array]';\r\n}\r\n  \r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/helper/data.js","module.exports = require(\"ejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ejs\"\n// module id = 17\n// module chunks = 0","import conf from '../conf'\r\nvar redis = require('redis');\r\n\r\n/**\r\n * 封装redis 缓存基本方法\r\n */\r\n\r\nlet client = redis.createClient(conf.cache.port, conf.cache.ip,{password:conf.cache.password});\r\n\r\nlet cache = {};\r\n\r\nvar version = 1;\r\n\r\n\r\n\r\nclient.on('error', function (err) {\r\n\t  console.log('Redis Error ' + err);\r\n});\r\n\r\n\r\n/**\r\n * 获取缓存数据\r\n */\r\ncache.get = function(key){\r\n\tkey = getKey(key);\r\n\r\n\treturn new Promise ((resolve, reject) => {\r\n\r\n\t\tclient.get(key, function(err, reply) {\r\n\t\t    if(err){\r\n\t\t    \tresolve(false);\r\n\t\t    }else{\r\n\t\t    \tresolve(reply);\r\n\t\t    }\r\n        });\r\n    });\r\n\r\n}\r\n\r\n/**\r\n * 设置缓存数据\r\n * @param key 缓存key\r\n * @param val 缓存数据   string\r\n * @param time 缓存时间 0 标示永久有效\r\n */\r\ncache.set = function(key,val ,time = 0){\r\n\tkey = getKey(key);\r\n\r\n\tclient.set(key, val,'EX' ,time);\r\n\r\n\treturn true;\r\n}\r\n\r\n\r\nfunction getKey(key){\r\n\treturn \"node:\" + key;\r\n}\r\n\r\n\r\nexport default cache\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/helper/cache.js","module.exports = require(\"redis\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redis\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 20\n// module chunks = 0","var request = require('request');\r\nvar async = require('async');\r\nvar baseUrl = \"https://uapi.youzu.com/api/158\"; // 后端接口Url\r\n\r\nexports.xhr = {\r\n\t/**\r\n\t * @description ApiGet请求\r\n\t */\r\n\tget : function(name, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqs:data,\r\n\t\t\theaders: {},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * @description ApiPost请求\r\n\t */\r\n\tpost : function(name, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify(data),\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\":'application/json'\r\n\t\t\t},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * @description 头部带TOKEN的ApiGet请求\r\n\t */\r\n\ttokenget : function(name, token, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tqs:data,\r\n\t\t\theaders: {\r\n\t\t\t\t\"X-token\": token,\r\n\t\t\t\t\"Content-Type\": 'application/json'\r\n\t\t\t},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * @description 头部带TOKEN的ApiPost请求\r\n\t */\r\n\ttokenpost : function(name, token, data, callback, next) {\r\n\t\tvar options = {\r\n\t\t\turl: baseUrl + name,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify(data),\r\n\t\t\theaders: {\r\n\t\t\t\t\"X-token\": token,\r\n\t\t\t\t\"Content-Type\":'application/json'\r\n\t\t\t},\r\n\t\t\ttimeout: 10000\r\n\t\t};\r\n\t\trequest(options, function(err, res, body) {\r\n\t\t\tapicallback(err, res, body, callback, next)\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * @description 接口返回统一处理\r\n */\r\nfunction apicallback(err, res, body, callback, next) {\r\n\tif(!err && res.statusCode == 200){\r\n\t\ttry{\r\n\t\t\tbody = JSON.parse(body);\r\n\t\t\tif(body.status != 200){\r\n\t\t\t\tif(body.message){\r\n\t\t\t\t\tcallback(body);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// exports.error.custom('Oops! 发生问题了', body.status, body.message, next);\r\n\t\t\t\t\t// body = [];\r\n\t\t\t\t\tbody.data = [];\r\n\t\t\t\t\tcallback(body)\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tcallback(body);\r\n\t\t\t}\r\n\t\t}catch(err){\r\n\t\t\t// console.log(err)\r\n\t\t\t// exports.error.noapi(next);\r\n\t\t\tbody.data = [];\r\n\t\t\tcallback(body)\r\n\t\t};\r\n\t}else{\r\n\t\tconsole.log('没有api')\r\n\t\t// exports.error.noapi(next);\r\n\t\tvar body = {};\r\n\t\tbody.data = [];\r\n\t\tcallback(body)\r\n\t}\r\n}\r\n\r\n/**\r\n * @description 错误&提示处理\r\n */\r\nexports.error = {\r\n\topenapp:function(next) {\r\n\t\terrorFun(\"Access error\", 200, \"此页面只允许在客户端中打开\", next);\r\n\t},\r\n\tnosql:function(next) {\r\n\t\terrorFun(\"Database connection failed\", 500, \"无法连接到数据库或连接超时\", next);\r\n\t},\r\n\tnoapi:function(next) {\r\n\t\terrorFun(\"Interface failed\", 500, \"无法链接到接口或链接超时\", next);\r\n\t},\r\n\tformat:function(next) {\r\n\t\terrorFun(\"Format error\", 500, \"接口不是一个有效的JSON格式\", next);\r\n\t},\r\n\tdefault:function(next) {\r\n\t\tconsole.log(next)\r\n\t\terrorFun(\"Oops! 发生问题了 :(\", 500, \"无法打开这个页面\", next);\r\n\t},\r\n\tcustom:function(name, status, stack, next) {\r\n\t\terrorFun(name, status, stack, next);\r\n\t}\r\n}\r\n\r\nfunction errorFun (name, status, stack, next) {\r\n\tconsole.log('[' + new Date().toLocaleString() + ']', name, status);\r\n\tvar err = new Error(name);\r\n\t\terr.status = status;\r\n\t\terr.stack = stack;\r\n\t\tconsole.log(next)\r\n\tnext(err);\r\n}\r\n\r\n// 日期格式化\r\nexports.formateDate = function (date) {\r\n    var defaultDate = date ? new Date(date) : new Date();\r\n    var year = defaultDate.getFullYear();\r\n    var month = defaultDate.getMonth() + 1;\r\n    var day = defaultDate.getDate();\r\n    month = month < 10 ? '0'+ month : month;\r\n    day = day < 10 ? '0' + day : day;\r\n    return year + '-' + month + '-' + day\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/api/util.js"],"sourceRoot":""}